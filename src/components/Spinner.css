/* Scoped spinner styles: no more global .grid leakage */

:root {
  --ai-blue:   #3b82f6;
  --ai-purple: #9333ea;
  --ai-green:  #22c55e;
  --ink-on-dark: rgba(232, 238, 252, 0.92);
}

/* Card */
.spinner-card.neuro {
  --size: 128px; --card-r: 16px; --pad: 12px;
  width: var(--size); height: var(--size);
  padding: var(--pad); border-radius: var(--card-r);
  background: transparent; border: 1px solid rgba(255,255,255,.16);
  display: grid; grid-template-rows: 1fr auto; place-items: center; gap: 8px;
  position: relative; isolation: isolate;
}
.spinner-card.neuro::before {
  content: ""; position: absolute; inset: 0; border-radius: var(--card-r); padding: 1px;
  background: conic-gradient(from 0deg, var(--ai-blue) 0%, var(--ai-purple) 33%, var(--ai-green) 66%, var(--ai-blue) 100%);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
          mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  filter: drop-shadow(0 6px 18px rgba(59,130,246,.25)) drop-shadow(0 6px 30px rgba(147,51,234,.20)) drop-shadow(0 6px 22px rgba(34,197,94,.18));
  animation: frame-rotate 4.2s linear infinite; pointer-events: none; z-index: -1;
}
@keyframes frame-rotate { to { transform: rotate(360deg); } }

/* Core canvas */
.spinner.neuro { --spin: calc(var(--size) * 0.64); width: var(--spin); height: var(--spin); position: relative; filter: drop-shadow(0 2px 10px rgba(0,0,0,.25)); }

/* ---- everything below is SCOPED under .spinner.neuro ---- */

/* renamed from .grid -> .spin-grid (and scoped) */
.spinner.neuro .spin-grid {
  position: absolute; inset: 6%; border-radius: 50%;
  background-image:
    repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0 1px, transparent 1px 8px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.06) 0 1px, transparent 1px 8px);
  transform: rotate(12deg); opacity: .65; animation: spin-grid-pan 6s linear infinite;
}
@keyframes spin-grid-pan { to { transform: rotate(372deg); } }

.spinner.neuro .neural-wave {
  position: absolute; inset: 10%; border-radius: 50%;
  background:
    radial-gradient(60% 60% at 50% 50%, rgba(59,130,246,.22), transparent 60%),
    radial-gradient(60% 60% at 65% 45%, rgba(147,51,234,.20), transparent 60%),
    radial-gradient(60% 60% at 35% 65%, rgba(34,197,94,.18), transparent 60%);
  filter: blur(6px); animation: wave 2.8s ease-in-out infinite;
}
@keyframes wave { 0%,100%{transform:scale(1);opacity:.8} 50%{transform:scale(1.05);opacity:1} }

/* Gyro rings */
.spinner.neuro .gyro {
  position: absolute; inset: 0; border-radius: 50%;
  background: conic-gradient(from 0deg, var(--ai-blue) 0%, var(--ai-purple) 40%, var(--ai-green) 80%, var(--ai-blue) 100%);
  -webkit-mask: radial-gradient(circle, transparent calc(50% - var(--thick)), #000 calc(50% - var(--thick) + 1px));
          mask: radial-gradient(circle, transparent calc(50% - var(--thick)), #000 calc(50% - var(--thick) + 1px));
  filter: drop-shadow(0 0 8px rgba(59,130,246,.35));
}
.spinner.neuro .gx { --thick: 9px; transform: perspective(600px) rotateX(58deg); animation: spin-gx 1.6s linear infinite; }
.spinner.neuro .gy { --thick: 7px; inset: 10%; transform: perspective(600px) rotateY(58deg); animation: spin-gy 2.1s linear infinite; opacity:.95; filter: drop-shadow(0 0 8px rgba(147,51,234,.45)); }
@keyframes spin-gx { to { transform: perspective(600px) rotateX(58deg) rotate(360deg); } }
@keyframes spin-gy { to { transform: perspective(600px) rotateY(58deg) rotate(-360deg); } }

/* Trails + dots */
.spinner.neuro .trail { position:absolute; inset:0; border-radius:50%; }
.spinner.neuro .trail::before{
  content:""; position:absolute; inset:0; border-radius:50%;
  background: conic-gradient(from 0deg, rgba(59,130,246,0) 0deg, rgba(59,130,246,.35) 30deg, rgba(147,51,234,.35) 120deg, rgba(34,197,94,.35) 240deg, rgba(59,130,246,0) 330deg);
  -webkit-mask: radial-gradient(circle, transparent calc(50% - 11px), #000 calc(50% - 11px + 1px));
          mask: radial-gradient(circle, transparent calc(50% - 11px), #000 calc(50% - 11px + 1px));
  filter: blur(.2px); opacity:.75;
}
.spinner.neuro .t1 { animation: trail-spin 2.2s linear infinite; }
.spinner.neuro .t2 { inset:12%; animation: trail-spin 2.8s linear infinite reverse; }
@keyframes trail-spin { to { transform: rotate(360deg); } }

.spinner.neuro .trail-dot{
  position:absolute; --r: calc(var(--spin)*0.42);
  width:10px;height:10px;border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%, #fff 0 35%, transparent 36%),
    conic-gradient(from 0deg, var(--ai-blue), var(--ai-purple), var(--ai-green), var(--ai-blue));
  box-shadow: 0 0 16px rgba(59,130,246,.7), 0 0 20px rgba(147,51,234,.55), 0 0 18px rgba(34,197,94,.45);
  transform: translate(var(--r),0); animation: bob 1.9s ease-in-out infinite;
}
.spinner.neuro .t2 .trail-dot{ --r: calc(var(--spin)*0.30); width:8px;height:8px; animation-duration:2.4s; }
@keyframes bob { 0%,100%{transform:translate(var(--r),0) scale(1);filter:brightness(1)} 50%{transform:translate(var(--r),0) scale(1.15);filter:brightness(1.1)} }

/* Core nucleus */
.spinner.neuro .core{
  position:absolute; inset:30%; border-radius:50%;
  background:
    radial-gradient(circle at 40% 40%, rgba(255,255,255,.95), rgba(255,255,255,.35) 35%, transparent 60%),
    conic-gradient(from 0deg, rgba(59,130,246,.25), rgba(147,51,234,.25), rgba(34,197,94,.25), rgba(59,130,246,.25));
  box-shadow: inset 0 0 12px rgba(255,255,255,.45), 0 2px 10px rgba(0,0,0,.25);
  animation: core-tilt 3.2s ease-in-out infinite;
}
@keyframes core-tilt{0%,100%{transform:rotate(0) scale(1)}50%{transform:rotate(8deg) scale(1.03)}}

/* Progress ring */
.spinner.neuro .progress-ring{
  position:absolute; inset:-2%; border-radius:50%; pointer-events:none; opacity:0; transform:scale(.98);
  transition:opacity .2s ease, transform .2s ease;
}
.spinner-card[data-has-progress="true"] .progress-ring{
  opacity:1; transform:scale(1);
  background: conic-gradient(from -90deg, var(--ai-blue) 0deg, var(--ai-purple) 120deg, var(--ai-green) 240deg, var(--ai-blue) 360deg);
  -webkit-mask: radial-gradient(circle, transparent calc(50% - 12px), #000 calc(50% - 12px + 1px)), conic-gradient(from -90deg, #000 calc(360deg * var(--p)), transparent 0);
          mask: radial-gradient(circle, transparent calc(50% - 12px), #000 calc(50% - 12px + 1px)), conic-gradient(from -90deg, #000 calc(360deg * var(--p)), transparent 0);
  filter: drop-shadow(0 0 10px rgba(59,130,246,.35)) drop-shadow(0 0 12px rgba(147,51,234,.30)) drop-shadow(0 0 12px rgba(34,197,94,.28));
}

/* Particles */
.spinner.neuro .particle-field{ position:absolute; inset:0; }
.spinner.neuro .particle{
  --i:1; --angle: calc(var(--i) * 60deg); --dist: calc(18% + (var(--i) * 2%));
  position:absolute; top:50%; left:50%; width:4px; height:4px; border-radius:50%;
  background: radial-gradient(circle, #fff 0 40%, rgba(255,255,255,0) 70%);
  transform: rotate(var(--angle)) translate(var(--dist)) translate(-50%, -50%);
  opacity:.75; animation: particle-spiral calc(2s + var(--i) * .25s) ease-in-out infinite;
  box-shadow: 0 0 8px rgba(59,130,246,.45), 0 0 10px rgba(147,51,234,.35);
}
@keyframes particle-spiral{
  0%,100%{ transform: rotate(var(--angle)) translate(var(--dist)) translate(-50%, -50%) scale(1); opacity:.75;}
  50%     { transform: rotate(calc(var(--angle) + 20deg)) translate(calc(var(--dist) + 6%)) translate(-50%, -50%) scale(1.35); opacity:1;}
}

/* Caption */
.spinner-text{ font-size:12px; font-weight:800; letter-spacing:.3px; color:var(--ink-on-dark); text-shadow:0 1px 0 rgba(0,0,0,.35); opacity:.92; text-align:center; }

/* A11y */
.sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,1px,1px); border:0; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .spinner-card.neuro::before,
  .spinner.neuro .spin-grid,
  .spinner.neuro .neural-wave,
  .spinner.neuro .gx, .spinner.neuro .gy,
  .spinner.neuro .t1, .spinner.neuro .t2,
  .spinner.neuro .trail-dot,
  .spinner.neuro .core,
  .spinner.neuro .progress-ring,
  .spinner.neuro .particle { animation: none !important; }
}
