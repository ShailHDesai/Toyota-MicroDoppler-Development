/* src/styles/DataPage.css */

/* ============================== */
/* Enterprise tokens              */
/* ============================== */
.data-page {
  --bg: #f6f8fb;
  --card: #ffffff;

  /* ink scale */
  --ink-strong: #111827;
  --ink: #1f2937;
  --ink-muted: #6b7280;
  --ink-subtle: #9ca3af;

  --text: var(--ink);
  --muted: var(--ink-muted);
  --border: rgba(15, 23, 42, 0.12);
  --ring: rgba(59, 130, 246, 0.25);
  --shadow: 0 6px 16px rgba(15, 23, 42, 0.08);

  /* Actions */
  --apply: #57C773;
  --apply-dark: #44b465;
  --apply-edge: #2fa45a;
  --danger: #e24949;
  --danger-dark: #cc3c3c;
  --danger-bg: #fff1f1;
  --disabled-bg: #eef2f7;

  /* Toggle variants */
  --yes-bg: #e9f9ef;
  --yes-border: #76d7a1;
  --yes-text: #145c2f;

  --no-bg: #ffecec;
  --no-border: #f1a7a7;
  --no-text: #7a1f1f;

  /* Aurora palette */
  --au-cyan: #00e5ff;
  --au-blue: #60a5fa;
  --au-teal: #14b8a6;
  --au-green: #22c55e;
  --au-glow: rgba(56, 189, 248, 0.55);
  --au-shadow: rgba(16, 185, 129, 0.22);

  /* UX accents */
  --accent: #0ea5e9;
  --accent-2: #10b981;
}

/* ============================== */
/* Page background / frame        */
/* ============================== */
.data-page {
  background: linear-gradient(180deg, #fafcff 0%, var(--bg) 100%);
  min-height: 100vh;
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue",
    Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}
.data-page.modal-open { overflow: hidden; }

.tool-frame {
  width: min(1120px, 96vw);
  margin: 8px auto 12px;
  background: transparent;
}

/* Density */
.density-compact { font-size: 12px; }

/* Header */
.page-header h1 {
  margin: 0 0 2px;
  font-weight: 600;
  letter-spacing: .2px;
  color: var(--ink-strong);
  font-size: 1.45em;
}
.page-help {
  margin: 0 0 8px;
  color: var(--ink-subtle);
  font-size: .92em;
}

/* ============================== */
/* Single card + layout           */
/* ============================== */
.form-card {
  position: relative;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  box-shadow: var(--shadow);
  padding: 10px;
}
.form-card::before {
  content: "";
  position: absolute;
  top: -1px; bottom: -1px; left: -1px;
  width: 3px;
  border-radius: 10px 0 0 10px;
  background: linear-gradient(180deg, var(--au-blue), var(--au-teal), var(--au-green));
  opacity: .5;
}

/* Two columns inside the single card */
.two-col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-items: start;
}

/* Sub-section headings in the card */
.form-card h2 {
  margin: 0 0 6px;
  font-weight: 700;
  color: var(--ink-strong);
  font-size: 1em;
  display: flex;
  align-items: center;
  gap: 6px;
  letter-spacing: .15px;
}
.form-card h2::after {
  content: "";
  flex: 1 1 auto;
  height: 1px;
  background: linear-gradient(90deg, rgba(0,0,0,0.08), rgba(0,0,0,0));
  margin-left: 6px;
}

/* ============================== */
/* Fields / inputs                */
/* ============================== */
.field {
  display: grid;
  gap: 3px;
  margin-bottom: 8px;
  padding: 2px;
  border-radius: 6px;
}
.field label {
  color: var(--ink-strong);
  font-size: .9em;
  font-weight: 600;
}
.help {
  color: var(--ink-subtle);
  font-size: .85em;
  margin-top: -1px;
}

/* focus */
.field:focus-within {
  background: #f8fafc;
  box-shadow: inset 2px 0 0 var(--accent), 0 1px 0 rgba(15,23,42,0.02);
}

/* compact widths on left column */
.form-card .two-col > div:first-child .input,
.form-card .two-col > div:first-child select,
.form-card .two-col > div:first-child .select-trigger,
.form-card .two-col > div:first-child .vru-trigger {
  width: auto;
  min-width: 220px;
  max-width: 320px;
}

.input, select, .select-trigger, .vru-trigger {
  height: 1.9em;
  padding: 0 .55em;
  font-size: .9em;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: #fff;
  outline: none;
  transition: box-shadow .12s, border-color .12s, background .12s;
}
.input.input-sm { max-width: 320px; }
.input.input-xs { max-width: 220px; }

.input:focus, select:focus, .select-trigger:focus, .vru-trigger:focus {
  border-color: #93c5fd;
  box-shadow: 0 0 0 .22rem var(--ring);
}

/* VRU trigger (looks like an input) */
.vru-trigger {
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  cursor: pointer;
  color: var(--ink);
}
.vru-trigger .count-pill {
  background: #eef2f7;
  color: #111827;
  border-radius: 999px;
  padding: 0 .5em;
  height: 1.4em;
  display: inline-flex;
  align-items: center;
  font-size: .82em;
  border: 1px solid var(--border);
}

/* VRU + Gait row */
.row-two {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.span-2 { grid-column: 1 / -1; }
.gait-field .input { max-width: 260px; }

/* ============================== */
/* VRU MODAL (window popup)       */
/* ============================== */
.vru-modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none;
}
.vru-modal[aria-hidden="false"] { display: block; }

.vru-modal__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(2, 6, 23, 0.45);
  backdrop-filter: blur(2px);
}

.vru-modal__panel {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(880px, 92vw);
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(15, 23, 42, 0.25);
  display: grid;
  grid-template-rows: auto minmax(0, 1fr) auto;
}

/* header */
.vru-modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(15,23,42,.08);
}
.vru-modal__title {
  font-weight: 700;
  font-size: 14px;
  color: var(--ink-strong);
}

/* body (scrolls internally) */
.vru-modal__body {
  padding: 10px 14px 12px;
  max-height: min(72vh, 640px);
  overflow: auto;
}

/* footer */
.vru-modal__footer {
  display: flex;
  justify-content: flex-end;
  align-items: center;        /* align vertically */
  gap: 8px;
  padding: 10px 14px;
  border-top: 1px solid rgba(15,23,42,.08);
  background: #fafafa;
  border-radius: 0 0 12px 12px;
}

/* Clear button in header — RED */
.btn-danger {
  background: #fff;
  color: var(--danger);
  border: 1px solid var(--danger);
  height: 1.9em;
  padding: 0 .75em;
  border-radius: 999px;
  font-weight: 700;
  font-size: .95em;
  cursor: pointer;
}
.btn-danger:hover {
  background: var(--danger-bg);
  color: var(--danger-dark);
  border-color: var(--danger-dark);
}

/* (neutral ghost style kept if needed elsewhere) */
.btn-ghost {
  background: #f3f4f6;
  color: #111827;
  border: 1px solid var(--border);
  height: 1.9em;
  padding: 0 .75em;
  border-radius: 999px;
  font-weight: 700;
  font-size: .95em;
  cursor: pointer;
}
.btn-ghost:hover { filter: brightness(0.98); }

/* Modal confirm primary (compact size) */
.btn-primary {
  background: linear-gradient(180deg, var(--apply) 0%, #45c276 60%, #38b96f 100%);
  color: #082c16;
  border: 1px solid var(--apply-edge);
  height: 2em;
  padding: 0 .9em;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
}
.btn-primary:hover {
  background: linear-gradient(180deg, var(--apply-dark) 0%, #3fbf72 60%, #34b36a 100%);
}
/* Make the modal's Confirm smaller */
.vru-modal__footer .btn-primary {
  height: 1.7em;
  padding: 0 .6em;
  font-size: .85em;
  border-radius: 7px;
}

/* Modal Cancel — compact + colored, aligned with Confirm */
.vru-modal__footer .btn:not(.btn-primary) {
  background: linear-gradient(180deg, #ffffff 0%, #f7f8fb 100%);
  border: 1px solid #d1d5db;
  color: #374151;
  height: 1.7em;
  padding: 0 .6em;
  font-size: .85em;
  border-radius: 7px;
}
.vru-modal__footer .btn:not(.btn-primary):hover {
  background: #f3f4f6;
  border-color: #cbd5e1;
}

/* grid inside modal */
.vru-modal .grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr; /* more columns to reduce scroll */
  gap: 10px;
}
@media (max-width: 880px) {
  .vru-modal .grid { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 560px) {
  .vru-modal .grid { grid-template-columns: 1fr; }
}

/* VRU row reused */
.vru-row {
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px;
  display: grid;
  grid-template-columns: 22px 1fr auto;
  column-gap: 8px;
  align-items: center;
  background: #fff;
}
.vru-row .name {
  font-size: 12px;
  font-weight: 600;
  color: var(--ink-strong);
}
.vru-icon {
  width: 20px; height: 20px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #f3f4f6;
  color: #374151;
}

/* segmented control */
.seg {
  display: inline-grid;
  grid-auto-flow: column;
  border: 1px solid var(--border);
  border-radius: 999px;
  overflow: hidden;
  background: #fff;
}
.seg button {
  height: 1.6em;
  padding: 0 .5em;
  font-size: .8em;
  border: none;
  background: transparent;
  cursor: pointer;
  color: var(--ink);
  white-space: nowrap;
}
.seg button + button { border-left: 1px solid var(--border); }
.seg button.on.must { background: var(--yes-bg); color: var(--yes-text); }
.seg button.on.not  { background: var(--no-bg);  color: var(--no-text); }

/* ============================== */
/* Constraints                    */
/* ============================== */
.constraints-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.range-pair .range-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
}
.range-box { display: grid; gap: 3px; }
.mini-label { font-size: .78em; color: var(--ink-muted); }
.range-pair .input.input-xs { max-width: 9rem; }

/* ============================== */
/* Bottom actions                 */
/* ============================== */
.bottom-actions {
  display: flex;
  justify-content: flex-end;
  gap: 6px;
  margin-top: 8px;
}

/* Buttons (shared) */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 2em;
  padding: 0 .75em;
  border-radius: 7px;
  border: 1px solid transparent;
  font-weight: 600;
  font-size: .9em;
  cursor: pointer;
  position: relative;
  transition: transform .12s, box-shadow .12s, opacity .12s, background-color .12s, border-color .12s;
}
.btn-sm { height: 1.9em; padding: 0 .65em; font-size: .85em; border-radius: 6px; }

.btn[disabled] {
  cursor: not-allowed;
  opacity: .55;
  background: var(--disabled-bg) !important;
  border-color: var(--border) !important;
  box-shadow: none !important;
  transform: none !important;
}

/* Apply (page footer) */
.btn-apply {
  color: #082c16;
  background: linear-gradient(180deg, var(--apply) 0%, #45c276 60%, #38b96f 100%);
  border-color: var(--apply-edge);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.35),
    0 6px 14px rgba(87,199,115,.28);
  overflow: hidden;
}
.btn-apply::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(100deg, rgba(255,255,255,.35) 0%, rgba(255,255,255,0) 35%);
  transform: translateX(-120%);
  transition: transform .6s ease;
  pointer-events: none;
}
.btn-apply:not([disabled]):hover {
  background: linear-gradient(180deg, var(--apply-dark) 0%, #3fbf72 60%, #34b36a 100%);
  transform: translateY(-1px);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.35),
    0 9px 18px rgba(87,199,115,.35);
}
.btn-apply:not([disabled]):hover::after { transform: translateX(0%); }
.btn-apply:focus-visible {
  outline: none;
  box-shadow: 0 0 0 .2rem rgba(87,199,115,.32), 0 6px 16px rgba(87,199,115,.32);
}

/* Clear (page footer) */
.btn-clear {
  background: #fff;
  color: var(--danger);
  border-color: var(--danger);
}
.btn-clear:not([disabled]):hover {
  background: var(--danger-bg);
  color: var(--danger-dark);
  border-color: var(--danger-dark);
  transform: translateY(-1px);
}

/* ============================== */
/* Responsive                     */
/* ============================== */
@media (max-width: 980px) {
  .two-col { grid-template-columns: 1fr; }
}
